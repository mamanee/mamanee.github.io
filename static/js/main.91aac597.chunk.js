(this["webpackJsonpsmart-money"]=this["webpackJsonpsmart-money"]||[]).push([[0],{11:function(e,t,n){e.exports={weekViewWrapper:"week_weekViewWrapper__1sIi8",weekDayWrapper:"week_weekDayWrapper__3YO5D",last:"week_last__WXZnY",weekDayName:"week_weekDayName__12Uy0",weekDayDate:"week_weekDayDate__1Ny7r",weekDayProfit:"week_weekDayProfit__2MfcI",dayDetailsWrapper:"week_dayDetailsWrapper__3HQBo",buttonArea:"week_buttonArea__3adZE",addButton:"week_addButton__30YVi"}},16:function(e,t,n){e.exports={wrapper:"PopUp_wrapper__2HU00"}},2:function(e,t,n){e.exports={wrapper:"main_wrapper__-8n4U",loading:"main_loading__3uRqN",mainGrid:"main_mainGrid__nl8MA",header:"main_header__2mcmx",footer:"main_footer__2i-vV",title:"main_title__12jnD",section:"main_section__p5kGc",cardWrapper:"main_cardWrapper__3aawm",animWrapper:"main_animWrapper__3j1Vd",animBackdrop:"main_animBackdrop__18dN9",inputArea:"main_inputArea__YfEHI",input:"main_input__3QIpX",buttons:"main_buttons__1Wd-5",button:"main_button__2EjwP",spent:"main_spent__1UrWt",income:"main_income__sUZZJ",monthWrapper:"main_monthWrapper__TcULD",monthItem:"main_monthItem__1oBNi",monthSpent:"main_monthSpent__1K_Qr",monthIncome:"main_monthIncome__3208A",monthProfit:"main_monthProfit__xffan",monthAmount:"main_monthAmount__3jZa6",monthLabel:"main_monthLabel__1O9B3",monthTitle:"main_monthTitle__1fTeO",modeSelector:"main_modeSelector__3hY4y",mode:"main_mode__3o9f-",itemWrapper:"main_itemWrapper__25RpC",itemButtons:"main_itemButtons__282Sx",itemValue:"main_itemValue__zgIpG",itemComment:"main_itemComment__ZoEYt",dayView:"main_dayView__1k4tz",historyTitle:"main_historyTitle__A9SoH"}},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(25),o=n.n(c),i=n(4),s=n(2),l=n.n(s),u=n(26),d=n(9),m=n.n(d),j=n(7),b=n(8),f=n(10),p=n(14),h=function(e){return Object(b.a)(Array(e)).map((function(e,t){return t}))};var v=function(e){return"".concat(e," \u20bd")},O=n(3),_=n.n(O),x=n(27),y=n.n(x).a.create({baseURL:"https://smart-money-c44ee-default-rtdb.firebaseio.com/",withCredentials:!1}),k=function(e){return y.get("/db/".concat(e,".json")).then((function(e){return e.data}))},g=function(e,t){return e?y.put("/db/".concat(e,".json"),t).then((function(e){return e.data})):y.post("db.json",t).then((function(e){return e.data}))},N=h(5),w=Object(i.a)(N,5),C=w[0],D=w[1],S=w[2],W=w[3],A=w[4],B=h(3),T=Object(i.a)(B,3),I=T[0],F=T[1],E=T[2],L="DD-MM-YYYY",P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,n="day";switch(t){case C:n="day";break;case D:n="isoWeek";break;case S:n="month";break;case W:n="year"}for(var a=_()(e,L),r=a.clone().startOf(n),c=a.clone().endOf(n),o=[],i=r;i<=c;)o.push(_()(i,L).format(L)),i=i.clone().add(1,"d");return o},V={days:{},getTotal:function(){return 0},addTransaction:function(){},getHistory:function(){return[]},getDaysOfRange:function(){arguments.length>0&&void 0!==arguments[0]||_()().format(L);return[]},isFetching:!1},Y=r.a.createContext(V),M=n(6),H=function(e,t){var n=function(n){n.target===document.querySelector(".".concat(e))&&t()},r=function(e){27===e.keyCode&&t()},c=Object(a.useRef)(null);return Object(a.useEffect)((function(){if(c){var e=c.current;return e.addEventListener("click",n),document.addEventListener("keydown",r),function(){e.removeEventListener("click",n),document.removeEventListener("keydown",r)}}}),[c]),c},R=n.p+"static/media/preloader.5a0dcb1d.svg",U=n(11),Z=n.n(U),G=n(28),z=n(16),J=n.n(z),Q=n(0),q=function(e){var t=e.onClose,n=void 0===t?function(){}:t,r=Object(G.a)(e,["onClose"]),c=Object(a.useState)(!1),o=Object(i.a)(c,2),s=o[0],l=o[1],u=H(J.a.wrapper,(function(){l(!0),setTimeout((function(){n()}),300)})),d=Object(M.b)({opacity:Number(!s),from:{opacity:Number(s)}}),m=Object(M.b)({marginBottom:-100*Number(s),from:{marginBottom:-100*Number(!s)}});return Object(Q.jsx)(M.a.div,{style:d,className:J.a.wrapper,ref:u,children:Object(Q.jsx)(M.a.div,{style:m,children:r.children})})},X=function(e){var t=e.date,n=Object(a.useState)(!1),r=Object(i.a)(n,2),c=r[0],o=r[1];return Object(Q.jsxs)("div",{className:Z.a.dayDetailsWrapper,children:[Object(Q.jsx)(ie,{day:t}),c&&Object(Q.jsx)(q,{zIndex:1100,onClose:function(){return o(!1)},children:Object(Q.jsx)(ae,{date:t,onClose:function(){return o(!1)}})}),Object(Q.jsx)("div",{className:Z.a.buttonArea,children:Object(Q.jsxs)("div",{className:Z.a.addButton,onClick:function(){return o(!0)},children:[Object(Q.jsx)("i",{className:"fas fa-plus"}),Object(Q.jsxs)("span",{children:["Add transaction for ",_()(t,L).format("ddd DD/MM")]})]})})]})},K=function(e){var t=e.date,n=e.weekday,a=e.profit,r=e.onClick,c=void 0===r?function(){}:r,o=e.isLast,i=void 0!==o&&o;return Object(Q.jsxs)("div",{className:Z.a.weekDayWrapper,style:i?{border:"none"}:{},onClick:c,children:[Object(Q.jsx)("div",{className:Z.a.weekDayName,children:n}),Object(Q.jsx)("div",{className:Z.a.weekDayDate,children:t}),Object(Q.jsx)("div",{className:Z.a.weekDayProfit,style:{color:a>=0?"#0081A7":"#F07167"},children:void 0!==a?(a>0?"+":"")+v(a):""})]})},$=function(e){var t=e.day,n=void 0===t?_()().format(L):t,r=Object(a.useContext)(Y),c=r.getDaysOfRange,o=r.getTotal,s=Object(a.useState)(!1),l=Object(i.a)(s,2),u=l[0],d=l[1],m=c(n,D);return Object(Q.jsxs)("div",{className:Z.a.weekViewWrapper,children:[u&&Object(Q.jsx)(q,{onClose:function(){return d(!1)},children:Object(Q.jsx)(X,{date:u})}),m.map((function(e,t){return Object(Q.jsx)(K,{date:_()(e,L).format("DD"),weekday:_()(e,L).format("ddd"),profit:o(C,E,e),onClick:function(){return d(e)},isLast:t==m.length-1})}))]})},ee=function(){return Object(Q.jsx)("div",{className:l.a.loading,children:Object(Q.jsx)("img",{src:R,width:20,height:20})})},te=function(){var e=H(l.a.animBackdrop,(function(){return c(!1)})),t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(M.b)(r?{bottom:16}:{bottom:-200}),s=Object(M.b)(r?{opacity:1,pointerEvents:"all"}:{opacity:0,pointerEvents:"none"}),u=Object(M.b)(r?{bottom:-60}:{bottom:0});return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(M.a.div,{style:s,className:l.a.animBackdrop,ref:e}),Object(Q.jsx)(M.a.div,{style:o,className:l.a.animWrapper,children:r&&Object(Q.jsx)(ae,{onClose:function(){return c(!1)}})}),Object(Q.jsx)(M.a.div,{style:u,className:l.a.animWrapper,children:Object(Q.jsxs)("div",{className:l.a.footer,onClick:function(){return c((function(e){return!e}))},children:[Object(Q.jsx)("i",{className:"fas fa-plus"}),Object(Q.jsx)("span",{children:"Add transaction"})]})})]})},ne=function(){return Object(Q.jsx)("div",{className:l.a.header,children:Object(Q.jsxs)("div",{className:l.a.title,children:[Object(Q.jsx)("b",{children:"Money"}),"App"]})})},ae=function(e){var t=e.onClose,n=void 0===t?function(){}:t,r=e.date,c=void 0===r?_()().format(L):r,o=Object(a.useRef)(),s=Object(a.useState)(""),u=Object(i.a)(s,2),d=u[0],m=u[1],j=Object(a.useContext)(Y).addTransaction;return Object(Q.jsxs)("div",{className:l.a.cardWrapper,children:[Object(Q.jsx)("div",{className:l.a.inputArea,onClick:function(){o.current&&o.current.focus()},children:Object(Q.jsxs)("div",{className:l.a.input,children:[Object(Q.jsx)("input",{value:d,type:"number",ref:o,autoFocus:!0,pattern:"[0-9]*",inputMode:"decimal",placeholder:"0",style:{width:16*(d.toString().length+1)},onChange:function(e){return m((function(t){return e.target.value.length<=7?e.target.value:t}))},onFocus:function(){0==d&&m("")},onBlur:function(){""==d&&m(0)}}),Object(Q.jsx)("span",{children:"\u20bd"})]})}),Object(Q.jsxs)("div",{className:l.a.buttons,children:[Object(Q.jsxs)(ce,{className:l.a.income,onClick:function(){""!=d&&0!=d&&(j(I,parseFloat(d.toString()),"",c),n()),m("")},children:[Object(Q.jsx)("i",{className:"fas fa-plus"}),Object(Q.jsx)("span",{children:"Earned"})]}),Object(Q.jsxs)(ce,{className:l.a.spent,onClick:function(){""!=d&&0!=d&&(j(F,parseFloat(d.toString()),"",c),n()),m("")},children:[Object(Q.jsx)("i",{className:"fas fa-minus"}),Object(Q.jsx)("span",{children:"Spent"})]})]})]})},re=function(){var e=Object(a.useContext)(Y),t=(e.addTransaction,e.days,e.getTotal),n=e.fetch,r=e.isFetching;return Object(a.useEffect)((function(){n()}),[]),Object(Q.jsxs)(u.a,{className:l.a.wrapper,children:[r&&Object(Q.jsx)(ee,{}),Object(Q.jsxs)("div",{className:l.a.mainGrid,children:[Object(Q.jsx)(ne,{}),Object(Q.jsx)(oe,{getTotal:t}),Object(Q.jsx)("div",{style:{height:"60px"}}),Object(Q.jsx)(te,{})]})]})},ce=function(e){return Object(Q.jsx)("button",{className:l.a.button+" "+(null===e||void 0===e?void 0:e.className)||"",onClick:e.onClick,style:e.style,children:e.children})},oe=function(e){var t=e.getTotal,n=Object(a.useState)(D),r=Object(i.a)(n,2),c=r[0],o=r[1],s=Object(a.useState)({earned:0,spent:0,profit:0}),u=Object(i.a)(s,2),d=u[0],m=u[1],j=Object(a.useContext)(Y).days;return Object(a.useEffect)((function(){m({earned:t(c,I,_()().format(L)),spent:t(c,F,_()().format(L)),profit:t(c,E,_()().format(L))}),console.log("render")}),[c,j]),Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)("div",{className:l.a.modeSelector,children:[Object(Q.jsx)(ce,{className:l.a.mode,style:{backgroundColor:c==C?"#00AFB9":"#efefef",color:c==C?"white":"black"},onClick:function(){return o(C)},children:"Day"}),Object(Q.jsx)(ce,{className:l.a.mode,style:{backgroundColor:c==D?"#00AFB9":"#efefef",color:c==D?"white":"black"},onClick:function(){return o(D)},children:"Week"}),Object(Q.jsx)(ce,{className:l.a.mode,style:{backgroundColor:c==S?"#00AFB9":"#efefef",color:c==S?"white":"black"},onClick:function(){return o(S)},children:"Month"}),Object(Q.jsx)(ce,{className:l.a.mode,style:{backgroundColor:c==W?"#00AFB9":"#efefef",color:c==W?"white":"black"},onClick:function(){return o(W)},children:"Year"})]}),Object(Q.jsxs)("div",{className:l.a.monthWrapper,children:[Object(Q.jsxs)("div",{className:l.a.monthItem+" "+l.a.monthIncome,children:[Object(Q.jsx)("div",{className:l.a.monthLabel,children:"Earned"}),Object(Q.jsx)("div",{className:l.a.monthAmount,children:v(d.earned)})]}),Object(Q.jsxs)("div",{className:l.a.monthItem+" "+l.a.monthSpent,children:[Object(Q.jsx)("div",{className:l.a.monthLabel,children:"Spent"}),Object(Q.jsx)("div",{className:l.a.monthAmount,children:v(d.spent)})]}),Object(Q.jsxs)("div",{className:l.a.monthItem+" "+l.a.monthProfit,children:[Object(Q.jsx)("div",{className:l.a.monthLabel,children:"Profit"}),Object(Q.jsx)("div",{className:l.a.monthAmount,children:v(d.profit)})]})]}),c===C&&Object(Q.jsx)(ie,{}),c===D&&Object(Q.jsx)($,{})]})},ie=function(e){var t=e.day,n=void 0===t?_()().format(L):t,r=Object(a.useContext)(Y),c=r.getHistory,o=r.days,s=r.deleteTransaction,u=Object(a.useState)([]),d=Object(i.a)(u,2),m=d[0],j=d[1];return Object(a.useEffect)((function(){j(c(n))}),[n,o]),0==m.length?null:Object(Q.jsxs)("div",{className:l.a.dayView,children:[Object(Q.jsx)("div",{className:l.a.historyTitle,children:n===_()().format(L)?"Today's history:":"History of "+n.replaceAll("-",".")}),m.map((function(e,t){var a=e.type,r=e.amount,c=e.comment;return Object(Q.jsx)(se,{comment:c,amount:r,type:a,id:t,onDelete:function(){s(n,t)}},t)}))]})},se=function(e){var t=e.type,n=void 0===t?I:t,a=e.amount,r=void 0===a?0:a,c=e.comment,o=void 0===c?"":c,i=e.onDelete,s=void 0===i?function(){}:i;return Object(Q.jsxs)("div",{className:l.a.itemWrapper,children:[Object(Q.jsxs)("div",{className:l.a.itemValue,style:n===I?{color:"#00AFB9"}:{color:"#F07167"},children:[["+ ","- "][n],v(r)]}),Object(Q.jsx)("div",{className:l.a.itemButtons,onClick:s,children:Object(Q.jsx)("i",{className:"fas fa-times"})}),o&&Object(Q.jsx)("div",{className:l.a.itemComment,children:o})]})};n(54);var le=function(){var e=function(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),o=Object(i.a)(c,2),s=o[0],l=o[1],u=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,c,o,i,s,l,u,d=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=d.length>0&&void 0!==d[0]?d[0]:I,i=d.length>1&&void 0!==d[1]?d[1]:0,s=d.length>2&&void 0!==d[2]?d[2]:"",l=d.length>3&&void 0!==d[3]?d[3]:_()().format(L),u=Object(f.a)(Object(f.a)({},n),{},Object(j.a)({},l,Object(f.a)(Object(f.a)({},null===n||void 0===n?void 0:n[l]),{},{income:((null===n||void 0===n||null===(t=n[l])||void 0===t?void 0:t.income)||0)+i*Number(o===I),spent:((null===n||void 0===n||null===(a=n[l])||void 0===a?void 0:a.spent)||0)+i*Number(o===F),history:[].concat(Object(b.a)((null===n||void 0===n||null===(c=n[l])||void 0===c?void 0:c.history)||[]),[{type:o,amount:i,comment:s}])}))),r(u),e.next=8,h(!1,u);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,c,o,i,s,l,u,d,p=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>0&&void 0!==p[0]?p[0]:_()().format(L),l=p.length>1&&void 0!==p[1]?p[1]:-1,u=(null===n||void 0===n||null===(t=n[s])||void 0===t||null===(a=t.history)||void 0===a?void 0:a[l])||{amount:0,type:I},d=Object(f.a)(Object(f.a)({},n),{},Object(j.a)({},s,Object(f.a)(Object(f.a)({},null===n||void 0===n?void 0:n[s]),{},{income:(null===n||void 0===n||null===(c=n[s])||void 0===c?void 0:c.income)-u.amount*Number(u.type===I),spent:(null===n||void 0===n||null===(o=n[s])||void 0===o?void 0:o.spent)-u.amount*Number(u.type===F),history:Object(b.a)(((null===n||void 0===n||null===(i=n[s])||void 0===i?void 0:i.history)||[]).filter((function(e,t){return t!==l})))}))),r(d),e.next=7,h(!1,d);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,r,c,o,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],a=i.length>1?i[1]:void 0,l(!0),r=localStorage.getItem("userId"),c=!t&&(r||!1),e.next=7,g(c,a||n);case 7:return o=e.sent,l(!1),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{days:n,addTransaction:u,getTotal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"01-01-2021";return(e===A?Object.keys(n):P(a,e)).reduce((function(e,a){if(!(null===n||void 0===n?void 0:n[a]))return e;var r=n[a];switch(t){case I:return e+(r.income||0);case F:return e+(r.spent||0);case E:return e+((r.income||0)-(r.spent||0))}}),0)},deleteTransaction:d,getHistory:function(e){var t;return(null===(t=n[e])||void 0===t?void 0:t.history)||[]},fetch:function(){var e=Object(p.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),t=localStorage.getItem("userId"),e.next=4,k(t);case 4:if(n=e.sent){e.next=12;break}return e.next=8,h(!0);case 8:(null===(a=e.sent)||void 0===a?void 0:a.name)&&localStorage.setItem("userId",a.name),e.next=13;break;case 12:r(n);case 13:l(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isFetching:s,getDaysOfRange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_()().format(L);return P(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:D)}}}();return Object(Q.jsx)(Y.Provider,{value:e,children:Object(Q.jsx)(re,{})})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};n(55);o.a.render(Object(Q.jsx)(r.a.StrictMode,{children:Object(Q.jsx)(le,{})}),document.getElementById("root")),ue()}},[[56,1,2]]]);
//# sourceMappingURL=main.91aac597.chunk.js.map