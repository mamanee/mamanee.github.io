{"version":3,"sources":["components/screens/main.module.css","utils/utils.js","api/API.js","data/DataContext.js","utils/useEscape.js","assets/preloader.svg","components/screens/Main.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","Enum","length","Array","map","_","i","rub","value","axios","_axios","create","baseURL","withCredentials","fetchData","user","get","then","r","data","setData","put","post","DAY","WEEK","MONTH","YEAR","ALL","INCOME","SPENT","PROFIT","FORMAT","getDays","date","interval","unitOfTime","_date","moment","_Start","clone","startOf","_End","endOf","days","day","push","format","add","contextShape","getTotal","addTransaction","getHistory","DataContext","React","createContext","useEscape","className","callback","onOuterClick","e","target","document","querySelector","onEscape","keyCode","containerRef","useRef","useEffect","el","current","addEventListener","removeEventListener","Loading","styles","loading","src","preloader","width","height","Footer","container","animBackdrop","setModalShown","useState","isModalShown","popup","useSpring","bottom","backdrop","opacity","pointerEvents","button","div","style","ref","animWrapper","onClose","footer","onClick","v","Header","header","title","AddCard","input","setValue","useContext","cardWrapper","inputArea","focus","type","autoFocus","pattern","inputMode","placeholder","toString","onChange","p","onFocus","onBlur","buttons","income","parseFloat","spent","Main","fetch","isFetching","wrapper","mainGrid","Button","props","children","MonthOverview","mode","setMode","earned","profit","values","setValues","console","log","modeSelector","backgroundColor","color","monthWrapper","monthItem","monthIncome","monthLabel","monthAmount","monthSpent","monthProfit","DayView","deleteTransaction","history","setHistory","dayView","historyTitle","replaceAll","index","amount","comment","id","onDelete","HistoryItem","itemWrapper","itemValue","itemButtons","itemComment","App","userData","setDays","setFetching","a","newDays","Number","pushDays","_transaction","filter","isNewUser","payload","localStorage","getItem","_user","res","Object","keys","reduce","accum","currentKey","resp","name","setItem","useDataContext","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.878feb22.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"main_wrapper__-8n4U\",\"loading\":\"main_loading__3uRqN\",\"mainGrid\":\"main_mainGrid__nl8MA\",\"header\":\"main_header__2mcmx\",\"footer\":\"main_footer__2i-vV\",\"title\":\"main_title__12jnD\",\"section\":\"main_section__p5kGc\",\"cardWrapper\":\"main_cardWrapper__3aawm\",\"animWrapper\":\"main_animWrapper__3j1Vd\",\"animBackdrop\":\"main_animBackdrop__18dN9\",\"inputArea\":\"main_inputArea__YfEHI\",\"input\":\"main_input__3QIpX\",\"buttons\":\"main_buttons__1Wd-5\",\"button\":\"main_button__2EjwP\",\"spent\":\"main_spent__1UrWt\",\"income\":\"main_income__sUZZJ\",\"monthWrapper\":\"main_monthWrapper__TcULD\",\"monthItem\":\"main_monthItem__1oBNi\",\"monthSpent\":\"main_monthSpent__1K_Qr\",\"monthIncome\":\"main_monthIncome__3208A\",\"monthProfit\":\"main_monthProfit__xffan\",\"monthAmount\":\"main_monthAmount__3jZa6\",\"monthLabel\":\"main_monthLabel__1O9B3\",\"monthTitle\":\"main_monthTitle__1fTeO\",\"modeSelector\":\"main_modeSelector__3hY4y\",\"mode\":\"main_mode__3o9f-\",\"itemWrapper\":\"main_itemWrapper__25RpC\",\"itemButtons\":\"main_itemButtons__282Sx\",\"itemValue\":\"main_itemValue__zgIpG\",\"itemComment\":\"main_itemComment__ZoEYt\",\"dayView\":\"main_dayView__1k4tz\",\"historyTitle\":\"main_historyTitle__A9SoH\"};","export const Enum = (length) => [...Array(length)].map((_, i) => i);\r\n\r\nexport function polymorph() {\r\n    var len2func = [];\r\n    for(var i=0; i<arguments.length; i++)\r\n        if(typeof(arguments[i]) == \"function\")\r\n            len2func[arguments[i].length] = arguments[i];\r\n    return function() {\r\n        return len2func[arguments.length].apply(this, arguments);\r\n    }\r\n}\r\n\r\nexport const rub = (value) => `${value} ₽`\r\n","import _axios from \"axios\";\r\nconst axios = _axios.create({\r\n    baseURL: \"https://smart-money-c44ee-default-rtdb.firebaseio.com/\",\r\n    withCredentials: false\r\n})\r\n\r\nexport const fetchData = (user) => axios.get(`/db/${user}.json`).then(r=>r.data)\r\n\r\nexport const setData = (user, data) => {\r\n    if (user) {\r\n        return axios.put(`/db/${user}.json`, data).then(r=>r.data)\r\n    } else {\r\n        return axios.post('db.json', data).then(r=>r.data)\r\n    }\r\n}\r\n","import React, {useState} from 'react'\r\nimport {Enum} from \"../utils/utils\";\r\nimport moment from \"moment\";\r\nimport {fetchData, setData} from \"../api/API\";\r\n\r\nexport const [DAY, WEEK, MONTH, YEAR, ALL] = Enum(5)\r\nexport const [INCOME, SPENT, PROFIT] = Enum(3)\r\n\r\nexport const FORMAT = \"DD-MM-YYYY\"\r\n\r\n\r\nconst getDays = (date, interval = DAY) => { //date: \"DD-MM-YYY\"\r\n    let unitOfTime = \"day\"\r\n    switch (interval) {\r\n        case DAY:\r\n            unitOfTime = \"day\"\r\n            break\r\n        case WEEK:\r\n            unitOfTime = \"isoWeek\"\r\n            break\r\n        case MONTH:\r\n            unitOfTime = \"month\"\r\n            break\r\n        case YEAR:\r\n            unitOfTime = \"year\"\r\n            break\r\n    }\r\n    const _date = moment(date, FORMAT)\r\n    const _Start = _date.clone().startOf(unitOfTime)\r\n    const _End = _date.clone().endOf(unitOfTime)\r\n\r\n    let days = [];\r\n    let day = _Start;\r\n\r\n    while (day <= _End) {\r\n        days.push(moment(day, FORMAT).format(FORMAT));\r\n        day = day.clone().add(1, 'd');\r\n    }\r\n    return days // [\"DD-MM-YYYY\"]\r\n}\r\nconst contextShape = {\r\n    days: {},\r\n    getTotal: (interval = ALL, type = INCOME, date = '01-01-2021')=>0,\r\n    addTransaction: (day = '01-01-2021', type = INCOME, amount = 0, comment = '')=>{},\r\n    getHistory: (day = '01-01-2021') => []\r\n}\r\nexport const DataContext = React.createContext(contextShape)\r\n\r\n/*export const useDataContext = () => {\r\n\r\n    const [userData, setUserData] = useState(contextShape)\r\n\r\n    useEffect(()=>{\r\n        setUserData(new User(contextShape.days))\r\n    },[])\r\n    debugger\r\n\r\n\r\n    return userData\r\n}*/\r\n\r\nexport const useDataContext = () => {\r\n    const [days, setDays] = useState({})\r\n    const [isFetching, setFetching] = useState(false)\r\n\r\n    const getTotal = (interval = ALL, type = INCOME, date = '01-01-2021') => {\r\n        const possibleDays = interval === ALL ? Object.keys(days) : getDays(date, interval)\r\n        return possibleDays.reduce((accum, currentKey) => {\r\n            if (days?.[currentKey]) {\r\n                const day = days[currentKey]\r\n                switch (type) {\r\n                    case INCOME:\r\n                        return accum + (day.income || 0)\r\n                    case SPENT:\r\n                        return accum + (day.spent || 0)\r\n                    case PROFIT:\r\n                        return accum + ((day.income || 0) - (day.spent || 0))\r\n                }\r\n            } else\r\n                return accum\r\n        }, 0)\r\n    }\r\n    const addTransaction = async (type = INCOME, amount = 0, comment = '', day=moment().format(FORMAT))=>{\r\n        const newDays = {\r\n            ...days,\r\n            [day]: {\r\n                ...days?.[day],\r\n                income: (days?.[day]?.income || 0) + amount*Number(type === INCOME),\r\n                spent:  (days?.[day]?.spent || 0) + amount*Number(type === SPENT),\r\n                history: [\r\n                    ...(days?.[day]?.history || []),\r\n                    {\r\n                        type: type,\r\n                        amount: amount,\r\n                        comment: comment\r\n                    },\r\n                ],\r\n            },\r\n        }\r\n        setDays(newDays)\r\n        return await pushDays(false, newDays)\r\n    }\r\n\r\n    const getHistory = (day) => {\r\n        return days[day]?.history || []\r\n    }\r\n\r\n    const deleteTransaction = async (day=moment().format(FORMAT), index=-1) => {\r\n        const _transaction = days?.[day]?.history?.[index] || {amount: 0, type: INCOME}\r\n\r\n        const newDays = {\r\n            ...days,\r\n            [day]: {\r\n                ...days?.[day],\r\n                income: days?.[day]?.income - (_transaction.amount * Number(_transaction.type === INCOME)),\r\n                spent: days?.[day]?.spent - (_transaction.amount * Number(_transaction.type === SPENT)),\r\n                history: [\r\n                    ...(days?.[day]?.history || []).filter((_,i)=> i !== index),\r\n                ]\r\n            }\r\n        }\r\n        setDays(newDays)\r\n        return await pushDays(false, newDays)\r\n    }\r\n\r\n    const pushDays = async (isNewUser=false, payload) => {\r\n        setFetching(true)\r\n        const user = localStorage.getItem('userId')\r\n        const _user = isNewUser ? false : (user || false)\r\n            const res =  await setData(_user, payload || days)\r\n        setFetching(false)\r\n        return res\r\n    }\r\n    const fetch = async () => {\r\n        setFetching(true)\r\n        const user = localStorage.getItem('userId')\r\n        const data = await fetchData(user)\r\n        if (!data) {\r\n           const resp =  await pushDays(true)\r\n            resp?.name && localStorage.setItem('userId', resp.name)\r\n\r\n        }\r\n        else {\r\n            setDays(data)\r\n        }\r\n        setFetching(false)\r\n    }\r\n    return {days, addTransaction, getTotal, deleteTransaction, getHistory, fetch, isFetching}\r\n}\r\n","import {useEffect, useRef} from \"react\";\r\n\r\nconst useEscape = (className, callback) => {\r\n    const onOuterClick = (e) => {\r\n        if (e.target === document.querySelector(`.${className}`)) {\r\n            callback();\r\n        }\r\n    };\r\n\r\n    const onEscape = (e) => {\r\n        if (e.keyCode === 27) callback();\r\n    };\r\n\r\n    const containerRef = useRef();\r\n    useEffect(() => {\r\n        if (!containerRef) return;\r\n        const el = containerRef.current;\r\n        el.addEventListener('click', onOuterClick);\r\n        document.addEventListener('keydown', onEscape);\r\n        return () => {\r\n            el.removeEventListener('click', onOuterClick);\r\n            document.removeEventListener('keydown', onEscape);\r\n        }\r\n    }, [containerRef]);\r\n\r\n    return containerRef;\r\n};\r\n\r\nexport default useEscape;\r\n","export default __webpack_public_path__ + \"static/media/preloader.5a0dcb1d.svg\";","import React, {useRef, useState, useEffect, useContext} from 'react'\r\nimport styles from './main.module.css'\r\nimport Div100vh from \"react-div-100vh\";\r\nimport {DAY, WEEK, MONTH, YEAR, PROFIT, INCOME, FORMAT, SPENT} from \"../../data/DataContext\";\r\nimport {rub} from \"../../utils/utils\";\r\nimport {DataContext} from \"../../data/DataContext\";\r\nimport moment from \"moment\";\r\nimport {useSpring, animated} from 'react-spring'\r\nimport useEscape from \"../../utils/useEscape\";\r\nimport preloader from '../../assets/preloader.svg'\r\n\r\nconst Loading = () => {\r\n    return <div className={styles.loading}><img src={preloader} width={20} height={20}/></div>\r\n}\r\nconst Main = () => {\r\n    const {addTransaction, days, getTotal, fetch, isFetching} = useContext(DataContext)\r\n    useEffect(()=>{\r\n        fetch()\r\n    },[])\r\n\r\n    return <Div100vh className={styles.wrapper}>\r\n        {isFetching && <Loading/>}\r\n        <div className={styles.mainGrid}>\r\n            <Header/>\r\n            <MonthOverview getTotal={getTotal}/>\r\n            <div style={{height: \"60px\"}}/>\r\n            <Footer/>\r\n        </div>\r\n    </Div100vh>\r\n}\r\n\r\nconst Footer = () => {\r\n    const container = useEscape(styles.animBackdrop, ()=>setModalShown(false))\r\n    const [isModalShown, setModalShown] = useState(false)\r\n    const popup = useSpring(isModalShown ? {bottom: 16} : {bottom: -200})\r\n    const backdrop = useSpring(isModalShown ? {opacity: 1, pointerEvents: \"all\"} : {opacity: 0, pointerEvents: \"none\"})\r\n    const button = useSpring(!isModalShown ? {bottom: 0} : {bottom: -60})\r\n    return <>\r\n        <animated.div style={backdrop} className={styles.animBackdrop} ref={container}/>\r\n        <animated.div style={popup} className={styles.animWrapper}>{isModalShown && <AddCard onClose={() => setModalShown(false)}/>}</animated.div>\r\n        <animated.div style={button} className={styles.animWrapper}><div className={styles.footer} onClick={()=>setModalShown(v=>!v)}>\r\n        <i className={'fas fa-plus'}/><span>Add transaction</span>\r\n        </div>\r\n        </animated.div>\r\n    </>\r\n}\r\nconst Header = () => {\r\n    return <div className={styles.header}>\r\n        <div className={styles.title}>\r\n        <b>Money</b>App\r\n        </div>\r\n    </div>\r\n}\r\n\r\nconst AddCard = ({onClose=()=>{}}) => {\r\n    const input = useRef()\r\n    const [value, setValue] = useState('')\r\n    const {addTransaction} = useContext(DataContext)\r\n\r\n    const onAddEarned = () => {\r\n        if (value != '' && value != 0) {\r\n            addTransaction(INCOME, parseFloat(value.toString()))\r\n            onClose()\r\n        }\r\n        setValue('')\r\n    }\r\n\r\n    const onAddSpent = () => {\r\n        if (value != '' && value != 0) {\r\n            addTransaction(SPENT, parseFloat(value.toString()))\r\n            onClose()\r\n        }\r\n        setValue('')\r\n    }\r\n\r\n    const onInputFocus = () => {\r\n        if (input.current)\r\n            input.current.focus()\r\n    }\r\n\r\n    return <div className={styles.cardWrapper}>\r\n        <div className={styles.inputArea} onClick={onInputFocus}>\r\n            <div className={styles.input}>\r\n                <input value={value}\r\n                       type={\"number\"}\r\n                       ref={input}\r\n                       autoFocus={true}\r\n                       pattern={\"[0-9]*\"}\r\n                       inputMode={\"decimal\"}\r\n                       placeholder={'0'}\r\n                       style={{width: 16*(value.toString().length+1)}}\r\n                       onChange={(e)=>setValue(p=>e.target.value.length <=7 ? e.target.value : p)}\r\n                       onFocus={()=>{value == 0 && setValue('')}}\r\n                       onBlur={()=>{value == '' && setValue(0)}}\r\n                />\r\n                <span>₽</span>\r\n            </div>\r\n        </div>\r\n        <div className={styles.buttons}>\r\n            <Button className={styles.income} onClick={onAddEarned}><i className={'fas fa-plus'}/><span>Earned</span></Button>\r\n            <Button className={styles.spent}  onClick={onAddSpent}><i className={'fas fa-minus'}/><span>Spent</span></Button>\r\n\r\n        </div>\r\n    </div>\r\n}\r\nexport default Main\r\n\r\nconst Button = (props) => {\r\n    return <button className={styles.button+' '+props?.className || ''} onClick={props.onClick} style={props.style}>\r\n        {props.children}\r\n    </button>\r\n}\r\n\r\nconst MonthOverview = ({getTotal}) => {\r\n    const [mode, setMode] = useState(WEEK)\r\n    const [values, setValues] = useState({earned: 0, spent: 0, profit: 0})\r\n    const {days} = useContext(DataContext)\r\n\r\n\r\n\r\n    useEffect(()=>{\r\n        setValues({\r\n            earned: getTotal(mode, INCOME, moment().format(FORMAT)),\r\n            spent: getTotal(mode, SPENT, moment().format(FORMAT)),\r\n            profit: getTotal(mode, PROFIT, moment().format(FORMAT)),\r\n        })\r\n        console.log('render')\r\n    },[mode, days])\r\n\r\n    return <><div className={styles.modeSelector}>\r\n        <Button className={styles.mode} style={{backgroundColor: mode == DAY ? '#00AFB9' : '#efefef', color: mode == DAY ? 'white' : 'black'}} onClick={()=>setMode(DAY)}>Day</Button>\r\n        <Button className={styles.mode} style={{backgroundColor: mode == WEEK ? '#00AFB9' : '#efefef', color: mode == WEEK ? 'white' : 'black'}} onClick={()=>setMode(WEEK)}>Week</Button>\r\n        <Button className={styles.mode} style={{backgroundColor: mode == MONTH ? '#00AFB9' : '#efefef', color: mode == MONTH ? 'white' : 'black'}} onClick={()=>setMode(MONTH)}>Month</Button>\r\n        <Button className={styles.mode} style={{backgroundColor: mode == YEAR ? '#00AFB9' : '#efefef', color: mode == YEAR ? 'white' : 'black'}} onClick={()=>setMode(YEAR)}>Year</Button>\r\n    </div>\r\n    <div className={styles.monthWrapper}>\r\n        <div className={styles.monthItem+' '+styles.monthIncome}>\r\n            <div className={styles.monthLabel}>Earned</div>\r\n            <div className={styles.monthAmount}>{rub(values.earned)}</div>\r\n        </div>\r\n        <div className={styles.monthItem+' '+styles.monthSpent}>\r\n            <div className={styles.monthLabel}>Spent</div>\r\n            <div className={styles.monthAmount}>{rub(values.spent)}</div>\r\n        </div>\r\n        <div className={styles.monthItem+' '+styles.monthProfit}>\r\n            <div className={styles.monthLabel}>Profit</div>\r\n            <div className={styles.monthAmount}>{rub(values.profit)}</div>\r\n        </div>\r\n    </div>\r\n        <DayView />\r\n    </>\r\n}\r\n\r\nconst DayView = ({day = moment().format(FORMAT)}) => {\r\n    const {getHistory, days, deleteTransaction} = useContext(DataContext)\r\n    const [history, setHistory] = useState([])\r\n    useEffect(()=>{\r\n        setHistory(getHistory(day))\r\n    }, [day, days])\r\n\r\n    if (history.length == 0) return null\r\n    return <div className={styles.dayView}>\r\n        <div className={styles.historyTitle}>{day === moment().format(FORMAT) ? 'Today\\'s history:' : 'History of '+day.replaceAll('-','.')}</div>\r\n        {history.map(({type, amount, comment}, index)=><HistoryItem comment={comment} amount={amount} type={type} id={index} key={index} onDelete={()=>{deleteTransaction(day, index)}}/>)}\r\n    </div>\r\n}\r\nconst HistoryItem = ({type = INCOME, amount = 0, comment = '', onDelete=()=>{}}) => {\r\n    return <div className={styles.itemWrapper}>\r\n        <div className={styles.itemValue} style={type === INCOME ? {color: '#00AFB9'} : {color: '#F07167'}}>{['+ ','- '][type]}{rub(amount)}</div>\r\n        <div className={styles.itemButtons} onClick={onDelete}><i className={'fas fa-times'}/></div>\r\n        {comment && <div className={styles.itemComment}>{comment}</div>}\r\n    </div>\r\n}\r\n","import React from 'react'\nimport Main from \"./components/screens/Main\";\nimport '@fortawesome/fontawesome-free/css/all.css'\nimport {DataContext, useDataContext} from \"./data/DataContext\";\n\nfunction App() {\n\n  const userData = useDataContext()\n  return (\n      <DataContext.Provider value={userData}>\n        <Main/>\n      </DataContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}