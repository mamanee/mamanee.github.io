(this["webpackJsonpsmart-money"]=this["webpackJsonpsmart-money"]||[]).push([[0],{2:function(e,t,n){e.exports={wrapper:"main_wrapper__-8n4U",loading:"main_loading__3uRqN",mainGrid:"main_mainGrid__nl8MA",header:"main_header__2mcmx",footer:"main_footer__2i-vV",title:"main_title__12jnD",section:"main_section__p5kGc",cardWrapper:"main_cardWrapper__3aawm",animWrapper:"main_animWrapper__3j1Vd",animBackdrop:"main_animBackdrop__18dN9",inputArea:"main_inputArea__YfEHI",input:"main_input__3QIpX",buttons:"main_buttons__1Wd-5",button:"main_button__2EjwP",spent:"main_spent__1UrWt",income:"main_income__sUZZJ",monthWrapper:"main_monthWrapper__TcULD",monthItem:"main_monthItem__1oBNi",monthSpent:"main_monthSpent__1K_Qr",monthIncome:"main_monthIncome__3208A",monthProfit:"main_monthProfit__xffan",monthAmount:"main_monthAmount__3jZa6",monthLabel:"main_monthLabel__1O9B3",monthTitle:"main_monthTitle__1fTeO",modeSelector:"main_modeSelector__3hY4y",mode:"main_mode__3o9f-",itemWrapper:"main_itemWrapper__25RpC",itemButtons:"main_itemButtons__282Sx",itemValue:"main_itemValue__zgIpG",itemComment:"main_itemComment__ZoEYt",dayView:"main_dayView__1k4tz",historyTitle:"main_historyTitle__A9SoH"}},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(23),o=n.n(r),i=n(5),s=n(2),l=n.n(s),u=n(24),d=n(8),m=n.n(d),j=n(6),b=n(7),f=n(9),h=n(13),p=function(e){return Object(b.a)(Array(e)).map((function(e,t){return t}))};var v=function(e){return"".concat(e," \u20bd")},O=n(4),_=n.n(O),x=n(25),y=n.n(x).a.create({baseURL:"https://smart-money-c44ee-default-rtdb.firebaseio.com/",withCredentials:!1}),g=function(e){return y.get("/db/".concat(e,".json")).then((function(e){return e.data}))},N=function(e,t){return e?y.put("/db/".concat(e,".json"),t).then((function(e){return e.data})):y.post("db.json",t).then((function(e){return e.data}))},k=p(5),C=Object(i.a)(k,5),w=C[0],S=C[1],T=C[2],A=C[3],I=C[4],F=p(3),B=Object(i.a)(F,3),W=B[0],E=B[1],L=B[2],D="DD-MM-YYYY",P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w,n="day";switch(t){case w:n="day";break;case S:n="isoWeek";break;case T:n="month";break;case A:n="year"}for(var a=_()(e,D),c=a.clone().startOf(n),r=a.clone().endOf(n),o=[],i=c;i<=r;)o.push(_()(i,D).format(D)),i=i.clone().add(1,"d");return o},V={days:{},getTotal:function(){return 0},addTransaction:function(){},getHistory:function(){return[]}},Y=c.a.createContext(V),M=n(10),H=function(e,t){var n=function(n){n.target===document.querySelector(".".concat(e))&&t()},c=function(e){27===e.keyCode&&t()},r=Object(a.useRef)();return Object(a.useEffect)((function(){if(r){var e=r.current;return e.addEventListener("click",n),document.addEventListener("keydown",c),function(){e.removeEventListener("click",n),document.removeEventListener("keydown",c)}}}),[r]),r},G=n.p+"static/media/preloader.5a0dcb1d.svg",R=n(0),U=function(){return Object(R.jsx)("div",{className:l.a.loading,children:Object(R.jsx)("img",{src:G,width:20,height:20})})},Z=function(){var e=H(l.a.animBackdrop,(function(){return r(!1)})),t=Object(a.useState)(!1),n=Object(i.a)(t,2),c=n[0],r=n[1],o=Object(M.b)(c?{bottom:16}:{bottom:-200}),s=Object(M.b)(c?{opacity:1,pointerEvents:"all"}:{opacity:0,pointerEvents:"none"}),u=Object(M.b)(c?{bottom:-60}:{bottom:0});return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(M.a.div,{style:s,className:l.a.animBackdrop,ref:e}),Object(R.jsx)(M.a.div,{style:o,className:l.a.animWrapper,children:c&&Object(R.jsx)(q,{onClose:function(){return r(!1)}})}),Object(R.jsx)(M.a.div,{style:u,className:l.a.animWrapper,children:Object(R.jsxs)("div",{className:l.a.footer,onClick:function(){return r((function(e){return!e}))},children:[Object(R.jsx)("i",{className:"fas fa-plus"}),Object(R.jsx)("span",{children:"Add transaction"})]})})]})},J=function(){return Object(R.jsx)("div",{className:l.a.header,children:Object(R.jsxs)("div",{className:l.a.title,children:[Object(R.jsx)("b",{children:"Money"}),"App"]})})},q=function(e){var t=e.onClose,n=void 0===t?function(){}:t,c=Object(a.useRef)(),r=Object(a.useState)(""),o=Object(i.a)(r,2),s=o[0],u=o[1],d=Object(a.useContext)(Y).addTransaction;return Object(R.jsxs)("div",{className:l.a.cardWrapper,children:[Object(R.jsx)("div",{className:l.a.inputArea,onClick:function(){c.current&&c.current.focus()},children:Object(R.jsxs)("div",{className:l.a.input,children:[Object(R.jsx)("input",{value:s,type:"number",ref:c,autoFocus:!0,pattern:"[0-9]*",inputMode:"decimal",placeholder:"0",style:{width:16*(s.toString().length+1)},onChange:function(e){return u((function(t){return e.target.value.length<=7?e.target.value:t}))},onFocus:function(){0==s&&u("")},onBlur:function(){""==s&&u(0)}}),Object(R.jsx)("span",{children:"\u20bd"})]})}),Object(R.jsxs)("div",{className:l.a.buttons,children:[Object(R.jsxs)(Q,{className:l.a.income,onClick:function(){""!=s&&0!=s&&(d(W,parseFloat(s.toString())),n()),u("")},children:[Object(R.jsx)("i",{className:"fas fa-plus"}),Object(R.jsx)("span",{children:"Earned"})]}),Object(R.jsxs)(Q,{className:l.a.spent,onClick:function(){""!=s&&0!=s&&(d(E,parseFloat(s.toString())),n()),u("")},children:[Object(R.jsx)("i",{className:"fas fa-minus"}),Object(R.jsx)("span",{children:"Spent"})]})]})]})},z=function(){var e=Object(a.useContext)(Y),t=(e.addTransaction,e.days,e.getTotal),n=e.fetch,c=e.isFetching;return Object(a.useEffect)((function(){n()}),[]),Object(R.jsxs)(u.a,{className:l.a.wrapper,children:[c&&Object(R.jsx)(U,{}),Object(R.jsxs)("div",{className:l.a.mainGrid,children:[Object(R.jsx)(J,{}),Object(R.jsx)(K,{getTotal:t}),Object(R.jsx)("div",{style:{height:"60px"}}),Object(R.jsx)(Z,{})]})]})},Q=function(e){return Object(R.jsx)("button",{className:l.a.button+" "+(null===e||void 0===e?void 0:e.className)||"",onClick:e.onClick,style:e.style,children:e.children})},K=function(e){var t=e.getTotal,n=Object(a.useState)(S),c=Object(i.a)(n,2),r=c[0],o=c[1],s=Object(a.useState)({earned:0,spent:0,profit:0}),u=Object(i.a)(s,2),d=u[0],m=u[1],j=Object(a.useContext)(Y).days;return Object(a.useEffect)((function(){m({earned:t(r,W,_()().format(D)),spent:t(r,E,_()().format(D)),profit:t(r,L,_()().format(D))}),console.log("render")}),[r,j]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)("div",{className:l.a.modeSelector,children:[Object(R.jsx)(Q,{className:l.a.mode,style:{backgroundColor:r==w?"#00AFB9":"#efefef",color:r==w?"white":"black"},onClick:function(){return o(w)},children:"Day"}),Object(R.jsx)(Q,{className:l.a.mode,style:{backgroundColor:r==S?"#00AFB9":"#efefef",color:r==S?"white":"black"},onClick:function(){return o(S)},children:"Week"}),Object(R.jsx)(Q,{className:l.a.mode,style:{backgroundColor:r==T?"#00AFB9":"#efefef",color:r==T?"white":"black"},onClick:function(){return o(T)},children:"Month"}),Object(R.jsx)(Q,{className:l.a.mode,style:{backgroundColor:r==A?"#00AFB9":"#efefef",color:r==A?"white":"black"},onClick:function(){return o(A)},children:"Year"})]}),Object(R.jsxs)("div",{className:l.a.monthWrapper,children:[Object(R.jsxs)("div",{className:l.a.monthItem+" "+l.a.monthIncome,children:[Object(R.jsx)("div",{className:l.a.monthLabel,children:"Earned"}),Object(R.jsx)("div",{className:l.a.monthAmount,children:v(d.earned)})]}),Object(R.jsxs)("div",{className:l.a.monthItem+" "+l.a.monthSpent,children:[Object(R.jsx)("div",{className:l.a.monthLabel,children:"Spent"}),Object(R.jsx)("div",{className:l.a.monthAmount,children:v(d.spent)})]}),Object(R.jsxs)("div",{className:l.a.monthItem+" "+l.a.monthProfit,children:[Object(R.jsx)("div",{className:l.a.monthLabel,children:"Profit"}),Object(R.jsx)("div",{className:l.a.monthAmount,children:v(d.profit)})]})]}),Object(R.jsx)(X,{})]})},X=function(e){var t=e.day,n=void 0===t?_()().format(D):t,c=Object(a.useContext)(Y),r=c.getHistory,o=c.days,s=c.deleteTransaction,u=Object(a.useState)([]),d=Object(i.a)(u,2),m=d[0],j=d[1];return Object(a.useEffect)((function(){j(r(n))}),[n,o]),0==m.length?null:Object(R.jsxs)("div",{className:l.a.dayView,children:[Object(R.jsx)("div",{className:l.a.historyTitle,children:n===_()().format(D)?"Today's history:":"History of "+n.replaceAll("-",".")}),m.map((function(e,t){var a=e.type,c=e.amount,r=e.comment;return Object(R.jsx)($,{comment:r,amount:c,type:a,id:t,onDelete:function(){s(n,t)}},t)}))]})},$=function(e){var t=e.type,n=void 0===t?W:t,a=e.amount,c=void 0===a?0:a,r=e.comment,o=void 0===r?"":r,i=e.onDelete,s=void 0===i?function(){}:i;return Object(R.jsxs)("div",{className:l.a.itemWrapper,children:[Object(R.jsxs)("div",{className:l.a.itemValue,style:n===W?{color:"#00AFB9"}:{color:"#F07167"},children:[["+ ","- "][n],v(c)]}),Object(R.jsx)("div",{className:l.a.itemButtons,onClick:s,children:Object(R.jsx)("i",{className:"fas fa-times"})}),o&&Object(R.jsx)("div",{className:l.a.itemComment,children:o})]})};n(51);var ee=function(){var e=function(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),o=Object(i.a)(r,2),s=o[0],l=o[1],u=function(){var e=Object(h.a)(m.a.mark((function e(){var t,a,r,o,i,s,l,u,d=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=d.length>0&&void 0!==d[0]?d[0]:W,i=d.length>1&&void 0!==d[1]?d[1]:0,s=d.length>2&&void 0!==d[2]?d[2]:"",l=d.length>3&&void 0!==d[3]?d[3]:_()().format(D),u=Object(f.a)(Object(f.a)({},n),{},Object(j.a)({},l,Object(f.a)(Object(f.a)({},null===n||void 0===n?void 0:n[l]),{},{income:((null===n||void 0===n||null===(t=n[l])||void 0===t?void 0:t.income)||0)+i*Number(o===W),spent:((null===n||void 0===n||null===(a=n[l])||void 0===a?void 0:a.spent)||0)+i*Number(o===E),history:[].concat(Object(b.a)((null===n||void 0===n||null===(r=n[l])||void 0===r?void 0:r.history)||[]),[{type:o,amount:i,comment:s}])}))),c(u),e.next=8,p(!1,u);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(h.a)(m.a.mark((function e(){var t,a,r,o,i,s,l,u,d,h=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>0&&void 0!==h[0]?h[0]:_()().format(D),l=h.length>1&&void 0!==h[1]?h[1]:-1,u=(null===n||void 0===n||null===(t=n[s])||void 0===t||null===(a=t.history)||void 0===a?void 0:a[l])||{amount:0,type:W},d=Object(f.a)(Object(f.a)({},n),{},Object(j.a)({},s,Object(f.a)(Object(f.a)({},null===n||void 0===n?void 0:n[s]),{},{income:(null===n||void 0===n||null===(r=n[s])||void 0===r?void 0:r.income)-u.amount*Number(u.type===W),spent:(null===n||void 0===n||null===(o=n[s])||void 0===o?void 0:o.spent)-u.amount*Number(u.type===E),history:Object(b.a)(((null===n||void 0===n||null===(i=n[s])||void 0===i?void 0:i.history)||[]).filter((function(e,t){return t!==l})))}))),c(d),e.next=7,p(!1,d);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(h.a)(m.a.mark((function e(){var t,a,c,r,o,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],a=i.length>1?i[1]:void 0,l(!0),c=localStorage.getItem("userId"),r=!t&&(c||!1),e.next=7,N(r,a||n);case 7:return o=e.sent,l(!1),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{days:n,addTransaction:u,getTotal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"01-01-2021";return(e===I?Object.keys(n):P(a,e)).reduce((function(e,a){if(!(null===n||void 0===n?void 0:n[a]))return e;var c=n[a];switch(t){case W:return e+(c.income||0);case E:return e+(c.spent||0);case L:return e+((c.income||0)-(c.spent||0))}}),0)},deleteTransaction:d,getHistory:function(e){var t;return(null===(t=n[e])||void 0===t?void 0:t.history)||[]},fetch:function(){var e=Object(h.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),t=localStorage.getItem("userId"),e.next=4,g(t);case 4:if(n=e.sent){e.next=12;break}return e.next=8,p(!0);case 8:(null===(a=e.sent)||void 0===a?void 0:a.name)&&localStorage.setItem("userId",a.name),e.next=13;break;case 12:c(n);case 13:l(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isFetching:s}}();return Object(R.jsx)(Y.Provider,{value:e,children:Object(R.jsx)(z,{})})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};n(52);o.a.render(Object(R.jsx)(c.a.StrictMode,{children:Object(R.jsx)(ee,{})}),document.getElementById("root")),te()}},[[53,1,2]]]);
//# sourceMappingURL=main.878feb22.chunk.js.map