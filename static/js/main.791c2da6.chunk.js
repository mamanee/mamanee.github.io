(this["webpackJsonpsmart-money"]=this["webpackJsonpsmart-money"]||[]).push([[0],{16:function(e,t,n){e.exports={wrapper:"PopUp_wrapper__2HU00"}},2:function(e,t,n){e.exports={wrapper:"main_wrapper__-8n4U",loading:"main_loading__3uRqN",mainGrid:"main_mainGrid__nl8MA",header:"main_header__2mcmx",footer:"main_footer__2i-vV",title:"main_title__12jnD",section:"main_section__p5kGc",cardWrapper:"main_cardWrapper__3aawm",animWrapper:"main_animWrapper__3j1Vd",animBackdrop:"main_animBackdrop__18dN9",inputArea:"main_inputArea__YfEHI",input:"main_input__3QIpX",buttons:"main_buttons__1Wd-5",button:"main_button__2EjwP",spent:"main_spent__1UrWt",income:"main_income__sUZZJ",monthWrapper:"main_monthWrapper__TcULD",monthItem:"main_monthItem__1oBNi",monthSpent:"main_monthSpent__1K_Qr",monthIncome:"main_monthIncome__3208A",monthProfit:"main_monthProfit__xffan",monthAmount:"main_monthAmount__3jZa6",monthLabel:"main_monthLabel__1O9B3",monthTitle:"main_monthTitle__1fTeO",modeSelector:"main_modeSelector__3hY4y",mode:"main_mode__3o9f-",itemWrapper:"main_itemWrapper__25RpC",itemButtons:"main_itemButtons__282Sx",itemValue:"main_itemValue__zgIpG",itemComment:"main_itemComment__ZoEYt",dayView:"main_dayView__1k4tz",dayViewArea:"main_dayViewArea__3h_Im",noData:"main_noData__2FLKD",historyTitle:"main_historyTitle__A9SoH"}},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(25),o=n.n(c),i=n(4),s=n(2),d=n.n(s),l=n(26),u=n(10),m=n.n(u),j=n(7),b=n(8),f=n(11),p=n(14),h=function(e){return Object(b.a)(Array(e)).map((function(e,t){return t}))};var v=function(e){return"".concat(e," \u20bd")},O=n(3),_=n.n(O),x=n(27),y=n.n(x).a.create({baseURL:"https://smart-money-c44ee-default-rtdb.firebaseio.com/",withCredentials:!1}),g=function(e){return y.get("/db/".concat(e,".json")).then((function(e){return e.data}))},k=function(e,t){return e?y.put("/db/".concat(e,".json"),t).then((function(e){return e.data})):y.post("db.json",t).then((function(e){return e.data}))},N=h(5),w=Object(i.a)(N,5),C=w[0],D=w[1],S=w[2],A=w[3],W=w[4],T=h(3),B=Object(i.a)(T,3),F=B[0],I=B[1],L=B[2],E="DD-MM-YYYY",V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,n="day";switch(t){case C:n="day";break;case D:n="isoWeek";break;case S:n="month";break;case A:n="year"}for(var a=_()(e,E),r=a.clone().startOf(n),c=a.clone().endOf(n),o=[],i=r;i<=c;)o.push(_()(i,E).format(E)),i=i.clone().add(1,"d");return o},M={days:{},getTotal:function(){return 0},addTransaction:function(){},getHistory:function(){return[]},getDaysOfRange:function(){arguments.length>0&&void 0!==arguments[0]||_()().format(E);return[]},isFetching:!1},P=r.a.createContext(M),Y=n(6),R=function(e,t){var n=function(n){n.target===document.querySelector(".".concat(e))&&t()},r=function(e){27===e.keyCode&&t()},c=Object(a.useRef)(null);return Object(a.useEffect)((function(){if(c){var e=c.current;return e.addEventListener("click",n),document.addEventListener("keydown",r),function(){e.removeEventListener("click",n),document.removeEventListener("keydown",r)}}}),[c]),c},U=n.p+"static/media/preloader.5a0dcb1d.svg",H=n(9),G=n.n(H),Z=n(28),z=n(16),J=n.n(z),Q=n(0),q=function(e){var t=e.onClose,n=void 0===t?function(){}:t,r=Object(Z.a)(e,["onClose"]),c=Object(a.useState)(!1),o=Object(i.a)(c,2),s=o[0],d=o[1],l=R(J.a.wrapper,(function(){d(!0),setTimeout((function(){n()}),300)})),u=Object(Y.b)({config:{duration:250},opacity:Number(!s),from:{opacity:Number(s)}}),m=Object(Y.b)({config:{duration:250},marginBottom:-100*Number(s),from:{marginBottom:-100*Number(!s)}});return Object(Q.jsx)(Y.a.div,{style:u,className:J.a.wrapper,ref:l,children:Object(Q.jsx)(Y.a.div,{style:m,children:r.children})})},K=function(e){var t=e.date,n=Object(a.useState)(!1),r=Object(i.a)(n,2),c=r[0],o=r[1],s=Object(a.useContext)(P).getTotal;return Object(Q.jsxs)("div",{className:G.a.dayDetailsWrapper,children:[Object(Q.jsx)("div",{className:G.a.dayDetailsTitle,children:_()(t,E).format("dddd DD.MM")}),Object(Q.jsx)(oe,{fixedMode:C,getTotal:s,day:t}),c&&Object(Q.jsx)(q,{zIndex:1100,onClose:function(){return o(!1)},children:Object(Q.jsx)(ae,{date:t,onClose:function(){return o(!1)}})}),Object(Q.jsx)("div",{className:G.a.buttonArea,children:Object(Q.jsxs)("div",{className:G.a.addButton,onClick:function(){return o(!0)},children:[Object(Q.jsx)("i",{className:"fas fa-plus"}),Object(Q.jsx)("span",{children:"Add transaction for this day"})]})})]})},X=function(e){var t=e.date,n=e.weekday,a=e.profit,r=e.onClick,c=void 0===r?function(){}:r,o=e.isLast,i=void 0!==o&&o,s=e.fulldate;return Object(Q.jsxs)("div",{className:G.a.weekDayWrapper,style:i?{border:"none"}:{},onClick:c,children:[Object(Q.jsx)("div",{className:G.a.weekDayName,style:s==_()().format(E)?{color:"#F07167"}:{},children:n}),Object(Q.jsx)("div",{className:G.a.weekDayDate,style:s==_()().format(E)?{color:"#F07167"}:{},children:t}),Object(Q.jsx)("div",{className:G.a.weekDayProfit,style:{color:a>=0?"#0081A7":"#F07167"},children:void 0!==a?(a>0?"+":"")+v(a):""})]})},$=function(e){var t=e.day,n=void 0===t?_()().format(E):t,r=Object(a.useContext)(P),c=r.getDaysOfRange,o=r.getTotal,s=Object(a.useState)(!1),d=Object(i.a)(s,2),l=d[0],u=d[1],m=c(n,D);return Object(Q.jsxs)("div",{className:G.a.weekViewWrapper,children:[l&&Object(Q.jsx)(q,{onClose:function(){return u(!1)},children:Object(Q.jsx)(K,{date:l})}),m.map((function(e,t){return Object(Q.jsx)(X,{date:_()(e,E).format("DD"),fulldate:e,weekday:_()(e,E).format("ddd"),profit:o(C,L,e),onClick:function(){return u(e)},isLast:t===m.length-1},t)}))]})},ee=function(){return Object(Q.jsx)("div",{className:d.a.loading,children:Object(Q.jsx)("img",{src:U,width:20,height:20})})},te=function(){var e=R(d.a.animBackdrop,(function(){return c(!1)})),t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(Y.b)(r?{bottom:16}:{bottom:-200}),s=Object(Y.b)(r?{opacity:1,pointerEvents:"all"}:{opacity:0,pointerEvents:"none"}),l=Object(Y.b)(r?{bottom:-60}:{bottom:0});return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(Y.a.div,{style:s,className:d.a.animBackdrop,ref:e}),Object(Q.jsx)(Y.a.div,{style:o,className:d.a.animWrapper,children:r&&Object(Q.jsx)(ae,{onClose:function(){return c(!1)}})}),Object(Q.jsx)(Y.a.div,{style:l,className:d.a.animWrapper,children:Object(Q.jsxs)("div",{className:d.a.footer,onClick:function(){return c((function(e){return!e}))},children:[Object(Q.jsx)("i",{className:"fas fa-plus"}),Object(Q.jsx)("span",{children:"Add transaction"})]})})]})},ne=function(){return Object(Q.jsx)("div",{className:d.a.header,children:Object(Q.jsxs)("div",{className:d.a.title,children:[Object(Q.jsx)("b",{children:"Money"}),"App"]})})},ae=function(e){var t=e.onClose,n=void 0===t?function(){}:t,r=e.date,c=void 0===r?_()().format(E):r,o=Object(a.useRef)(),s=Object(a.useState)(""),l=Object(i.a)(s,2),u=l[0],m=l[1],j=Object(a.useContext)(P).addTransaction;return Object(Q.jsxs)("div",{className:d.a.cardWrapper,children:[Object(Q.jsx)("div",{className:d.a.inputArea,onClick:function(){o.current&&o.current.focus()},children:Object(Q.jsxs)("div",{className:d.a.input,children:[Object(Q.jsx)("input",{value:u,type:"number",ref:o,autoFocus:!0,pattern:"[0-9]*",inputMode:"decimal",placeholder:"0",style:{width:16*(u.toString().length+1)},onChange:function(e){return m((function(t){return e.target.value.length<=7?e.target.value:t}))},onFocus:function(){0==u&&m("")},onBlur:function(){""==u&&m(0)}}),Object(Q.jsx)("span",{children:"\u20bd"})]})}),Object(Q.jsxs)("div",{className:d.a.buttons,children:[Object(Q.jsxs)(ce,{className:d.a.income,onClick:function(){""!=u&&0!=u&&(j(F,parseFloat(u.toString()),"",c),n()),m("")},children:[Object(Q.jsx)("i",{className:"fas fa-plus"}),Object(Q.jsx)("span",{children:"Earned"})]}),Object(Q.jsxs)(ce,{className:d.a.spent,onClick:function(){""!=u&&0!=u&&(j(I,parseFloat(u.toString()),"",c),n()),m("")},children:[Object(Q.jsx)("i",{className:"fas fa-minus"}),Object(Q.jsx)("span",{children:"Spent"})]})]})]})},re=function(){var e=Object(a.useContext)(P),t=(e.addTransaction,e.days,e.getTotal),n=e.fetch,r=e.isFetching;return Object(a.useEffect)((function(){n()}),[]),Object(Q.jsxs)(l.a,{className:d.a.wrapper,children:[r&&Object(Q.jsx)(ee,{}),Object(Q.jsxs)("div",{className:d.a.mainGrid,children:[Object(Q.jsx)(ne,{}),Object(Q.jsx)(oe,{getTotal:t}),Object(Q.jsx)("div",{style:{height:"60px"}}),Object(Q.jsx)(te,{})]})]})},ce=function(e){return Object(Q.jsx)("button",{className:d.a.button+" "+(null===e||void 0===e?void 0:e.className)||"",onClick:e.onClick,style:e.style,children:e.children})},oe=function(e){var t=e.getTotal,n=e.fixedMode,r=void 0!==n&&n,c=e.day,o=Object(a.useState)(!1===r?D:r),s=Object(i.a)(o,2),l=s[0],u=s[1],m=Object(a.useState)({earned:0,spent:0,profit:0}),j=Object(i.a)(m,2),b=j[0],f=j[1],p=Object(a.useContext)(P).days,h=c||_()().format(E);return Object(a.useEffect)((function(){f({earned:t(l,F,h),spent:t(l,I,h),profit:t(l,L,h)}),console.log("render")}),[l,p]),Object(Q.jsxs)(Q.Fragment,{children:[!1===r&&Object(Q.jsxs)("div",{className:d.a.modeSelector,children:[Object(Q.jsx)(ce,{className:d.a.mode,style:{backgroundColor:l===C?"#00AFB9":"#efefef",color:l===C?"white":"black"},onClick:function(){return u(C)},children:"Day"}),Object(Q.jsx)(ce,{className:d.a.mode,style:{backgroundColor:l===D?"#00AFB9":"#efefef",color:l===D?"white":"black"},onClick:function(){return u(D)},children:"Week"}),Object(Q.jsx)(ce,{className:d.a.mode,style:{backgroundColor:l===S?"#00AFB9":"#efefef",color:l===S?"white":"black"},onClick:function(){return u(S)},children:"Month"}),Object(Q.jsx)(ce,{className:d.a.mode,style:{backgroundColor:l===A?"#00AFB9":"#efefef",color:l===A?"white":"black"},onClick:function(){return u(A)},children:"Year"})]}),Object(Q.jsxs)("div",{className:d.a.monthWrapper,children:[Object(Q.jsxs)("div",{className:d.a.monthItem+" "+d.a.monthIncome,children:[Object(Q.jsx)("div",{className:d.a.monthLabel,children:"Earned"}),Object(Q.jsx)("div",{className:d.a.monthAmount,children:v(b.earned)})]}),Object(Q.jsxs)("div",{className:d.a.monthItem+" "+d.a.monthSpent,children:[Object(Q.jsx)("div",{className:d.a.monthLabel,children:"Spent"}),Object(Q.jsx)("div",{className:d.a.monthAmount,children:v(b.spent)})]}),Object(Q.jsxs)("div",{className:d.a.monthItem+" "+d.a.monthProfit,children:[Object(Q.jsx)("div",{className:d.a.monthLabel,children:"Profit"}),Object(Q.jsx)("div",{className:d.a.monthAmount,children:v(b.profit)})]})]}),l===C&&Object(Q.jsx)(ie,{day:c}),l===D&&Object(Q.jsx)($,{day:c})]})},ie=function(e){var t=e.day,n=void 0===t?_()().format(E):t,r=Object(a.useContext)(P),c=r.getHistory,o=r.days,s=r.deleteTransaction,l=Object(a.useState)([]),u=Object(i.a)(l,2),m=u[0],j=u[1];return Object(a.useEffect)((function(){j(c(n))}),[n,o]),0===m.length?Object(Q.jsx)("div",{className:d.a.noData,children:"No data tracked for this day."}):Object(Q.jsx)("div",{className:d.a.dayViewArea,children:Object(Q.jsx)("div",{className:d.a.dayView,children:m.map((function(e,t){var a=e.type,r=e.amount,c=e.comment;return Object(Q.jsx)(se,{comment:c,amount:r,type:a,id:t,onDelete:function(){s(n,t)},isLast:t==m.length-1},t)}))})})},se=function(e){var t=e.type,n=void 0===t?F:t,a=e.amount,r=void 0===a?0:a,c=e.comment,o=void 0===c?"":c,i=e.onDelete,s=void 0===i?function(){}:i,l=e.isLast,u=void 0!==l&&l;return Object(Q.jsxs)("div",{className:d.a.itemWrapper,style:u?{borderBottom:"none"}:{},children:[Object(Q.jsxs)("div",{className:d.a.itemValue,style:n===F?{color:"#00AFB9"}:{color:"#F07167"},children:[["+ ","- "][n],v(r)]}),Object(Q.jsx)("div",{className:d.a.itemButtons,onClick:s,children:Object(Q.jsx)("i",{className:"fas fa-times"})}),o&&Object(Q.jsx)("div",{className:d.a.itemComment,children:o})]})};n(54);var de=function(){var e=function(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),o=Object(i.a)(c,2),s=o[0],d=o[1],l=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,c,o,i,s,d,l,u=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>0&&void 0!==u[0]?u[0]:F,i=u.length>1&&void 0!==u[1]?u[1]:0,s=u.length>2&&void 0!==u[2]?u[2]:"",d=u.length>3&&void 0!==u[3]?u[3]:_()().format(E),l=Object(f.a)(Object(f.a)({},n),{},Object(j.a)({},d,Object(f.a)(Object(f.a)({},null===n||void 0===n?void 0:n[d]),{},{income:((null===n||void 0===n||null===(t=n[d])||void 0===t?void 0:t.income)||0)+i*Number(o===F),spent:((null===n||void 0===n||null===(a=n[d])||void 0===a?void 0:a.spent)||0)+i*Number(o===I),history:[].concat(Object(b.a)((null===n||void 0===n||null===(c=n[d])||void 0===c?void 0:c.history)||[]),[{type:o,amount:i,comment:s}])}))),r(l),e.next=8,h(!1,l);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,c,o,i,s,d,l,u,p=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>0&&void 0!==p[0]?p[0]:_()().format(E),d=p.length>1&&void 0!==p[1]?p[1]:-1,l=(null===n||void 0===n||null===(t=n[s])||void 0===t||null===(a=t.history)||void 0===a?void 0:a[d])||{amount:0,type:F},u=Object(f.a)(Object(f.a)({},n),{},Object(j.a)({},s,Object(f.a)(Object(f.a)({},null===n||void 0===n?void 0:n[s]),{},{income:(null===n||void 0===n||null===(c=n[s])||void 0===c?void 0:c.income)-l.amount*Number(l.type===F),spent:(null===n||void 0===n||null===(o=n[s])||void 0===o?void 0:o.spent)-l.amount*Number(l.type===I),history:Object(b.a)(((null===n||void 0===n||null===(i=n[s])||void 0===i?void 0:i.history)||[]).filter((function(e,t){return t!==d})))}))),r(u),e.next=7,h(!1,u);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,r,c,o,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],a=i.length>1?i[1]:void 0,d(!0),r=localStorage.getItem("userId"),c=!t&&(r||!1),e.next=7,k(c,a||n);case 7:return o=e.sent,d(!1),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{days:n,addTransaction:l,getTotal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"01-01-2021";return(e===W?Object.keys(n):V(a,e)).reduce((function(e,a){if(!(null===n||void 0===n?void 0:n[a]))return e;var r=n[a];switch(t){case F:return e+(r.income||0);case I:return e+(r.spent||0);case L:return e+((r.income||0)-(r.spent||0))}}),0)},deleteTransaction:u,getHistory:function(e){var t;return(null===(t=n[e])||void 0===t?void 0:t.history)||[]},fetch:function(){var e=Object(p.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),t=localStorage.getItem("userId"),e.next=4,g(t);case 4:if(n=e.sent){e.next=12;break}return e.next=8,h(!0);case 8:(null===(a=e.sent)||void 0===a?void 0:a.name)&&localStorage.setItem("userId",a.name),e.next=13;break;case 12:r(n);case 13:d(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isFetching:s,getDaysOfRange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_()().format(E);return V(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:D)}}}();return Object(Q.jsx)(P.Provider,{value:e,children:Object(Q.jsx)(re,{})})},le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};n(55);o.a.render(Object(Q.jsx)(r.a.StrictMode,{children:Object(Q.jsx)(de,{})}),document.getElementById("root")),le()},9:function(e,t,n){e.exports={weekViewWrapper:"week_weekViewWrapper__1sIi8",weekDayWrapper:"week_weekDayWrapper__3YO5D",last:"week_last__WXZnY",weekDayName:"week_weekDayName__12Uy0",weekDayDate:"week_weekDayDate__1Ny7r",weekDayProfit:"week_weekDayProfit__2MfcI",dayDetailsWrapper:"week_dayDetailsWrapper__3HQBo",dayDetailsTitle:"week_dayDetailsTitle__3lBGc",buttonArea:"week_buttonArea__3adZE",addButton:"week_addButton__30YVi"}}},[[56,1,2]]]);
//# sourceMappingURL=main.791c2da6.chunk.js.map