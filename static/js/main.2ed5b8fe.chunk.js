(this["webpackJsonpsmart-money"]=this["webpackJsonpsmart-money"]||[]).push([[0],{12:function(e,t,n){e.exports={weekViewWrapper:"week_weekViewWrapper__1sIi8",weekDayWrapper:"week_weekDayWrapper__3YO5D",weekDayName:"week_weekDayName__12Uy0",weekDayDate:"week_weekDayDate__1Ny7r",weekDayProfit:"week_weekDayProfit__2MfcI"}},2:function(e,t,n){e.exports={wrapper:"main_wrapper__-8n4U",loading:"main_loading__3uRqN",mainGrid:"main_mainGrid__nl8MA",header:"main_header__2mcmx",footer:"main_footer__2i-vV",title:"main_title__12jnD",section:"main_section__p5kGc",cardWrapper:"main_cardWrapper__3aawm",animWrapper:"main_animWrapper__3j1Vd",animBackdrop:"main_animBackdrop__18dN9",inputArea:"main_inputArea__YfEHI",input:"main_input__3QIpX",buttons:"main_buttons__1Wd-5",button:"main_button__2EjwP",spent:"main_spent__1UrWt",income:"main_income__sUZZJ",monthWrapper:"main_monthWrapper__TcULD",monthItem:"main_monthItem__1oBNi",monthSpent:"main_monthSpent__1K_Qr",monthIncome:"main_monthIncome__3208A",monthProfit:"main_monthProfit__xffan",monthAmount:"main_monthAmount__3jZa6",monthLabel:"main_monthLabel__1O9B3",monthTitle:"main_monthTitle__1fTeO",modeSelector:"main_modeSelector__3hY4y",mode:"main_mode__3o9f-",itemWrapper:"main_itemWrapper__25RpC",itemButtons:"main_itemButtons__282Sx",itemValue:"main_itemValue__zgIpG",itemComment:"main_itemComment__ZoEYt",dayView:"main_dayView__1k4tz",historyTitle:"main_historyTitle__A9SoH"}},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(24),i=n.n(c),o=n(5),s=n(2),l=n.n(s),u=n(25),d=n(8),m=n.n(d),j=n(6),b=n(7),f=n(9),h=n(14),p=function(e){return Object(b.a)(Array(e)).map((function(e,t){return t}))};var v=function(e){return"".concat(e," \u20bd")},O=n(3),_=n.n(O),x=n(26),y=n.n(x).a.create({baseURL:"https://smart-money-c44ee-default-rtdb.firebaseio.com/",withCredentials:!1}),g=function(e){return y.get("/db/".concat(e,".json")).then((function(e){return e.data}))},k=function(e,t){return e?y.put("/db/".concat(e,".json"),t).then((function(e){return e.data})):y.post("db.json",t).then((function(e){return e.data}))},N=p(5),w=Object(o.a)(N,5),C=w[0],D=w[1],S=w[2],W=w[3],T=w[4],I=p(3),A=Object(o.a)(I,3),F=A[0],B=A[1],E=A[2],L="DD-MM-YYYY",P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,n="day";switch(t){case C:n="day";break;case D:n="isoWeek";break;case S:n="month";break;case W:n="year"}for(var a=_()(e,L),r=a.clone().startOf(n),c=a.clone().endOf(n),i=[],o=r;o<=c;)i.push(_()(o,L).format(L)),o=o.clone().add(1,"d");return i},V={days:{},getTotal:function(){return 0},addTransaction:function(){},getHistory:function(){return[]},getDaysOfRange:function(){arguments.length>0&&void 0!==arguments[0]||_()().format(L);return[]},isFetching:!1},Y=r.a.createContext(V),M=n(10),R=function(e,t){var n=function(n){n.target===document.querySelector(".".concat(e))&&t()},r=function(e){27===e.keyCode&&t()},c=Object(a.useRef)();return Object(a.useEffect)((function(){if(c){var e=c.current;return e.addEventListener("click",n),document.addEventListener("keydown",r),function(){e.removeEventListener("click",n),document.removeEventListener("keydown",r)}}}),[c]),c},H=n.p+"static/media/preloader.5a0dcb1d.svg",U=n(12),G=n.n(U),Z=n(0),J=function(e){var t=e.date,n=e.weekday,a=e.profit;return Object(Z.jsxs)("div",{className:G.a.weekDayWrapper,children:[Object(Z.jsx)("div",{className:G.a.weekDayName,children:n}),Object(Z.jsx)("div",{className:G.a.weekDayDate,children:t}),Object(Z.jsx)("div",{className:G.a.weekDayProfit,children:a})]})},q=function(e){var t=e.day,n=void 0===t?_()().format(L):t,r=Object(a.useContext)(Y),c=r.getDaysOfRange,i=r.getTotal,o=c(n,D);return Object(Z.jsx)("div",{className:G.a.weekViewWrapper,children:o.map((function(e){return Object(Z.jsx)(J,{date:_()(e,L).format("DD"),weekday:_()(e,L).format("ddd"),profit:i(C,E,e)})}))})},z=function(){return Object(Z.jsx)("div",{className:l.a.loading,children:Object(Z.jsx)("img",{src:H,width:20,height:20})})},Q=function(){var e=R(l.a.animBackdrop,(function(){return c(!1)})),t=Object(a.useState)(!1),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(M.b)(r?{bottom:16}:{bottom:-200}),s=Object(M.b)(r?{opacity:1,pointerEvents:"all"}:{opacity:0,pointerEvents:"none"}),u=Object(M.b)(r?{bottom:-60}:{bottom:0});return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(M.a.div,{style:s,className:l.a.animBackdrop,ref:e}),Object(Z.jsx)(M.a.div,{style:i,className:l.a.animWrapper,children:r&&Object(Z.jsx)(X,{onClose:function(){return c(!1)}})}),Object(Z.jsx)(M.a.div,{style:u,className:l.a.animWrapper,children:Object(Z.jsxs)("div",{className:l.a.footer,onClick:function(){return c((function(e){return!e}))},children:[Object(Z.jsx)("i",{className:"fas fa-plus"}),Object(Z.jsx)("span",{children:"Add transaction"})]})})]})},K=function(){return Object(Z.jsx)("div",{className:l.a.header,children:Object(Z.jsxs)("div",{className:l.a.title,children:[Object(Z.jsx)("b",{children:"Money"}),"App"]})})},X=function(e){var t=e.onClose,n=void 0===t?function(){}:t,r=Object(a.useRef)(),c=Object(a.useState)(""),i=Object(o.a)(c,2),s=i[0],u=i[1],d=Object(a.useContext)(Y).addTransaction;return Object(Z.jsxs)("div",{className:l.a.cardWrapper,children:[Object(Z.jsx)("div",{className:l.a.inputArea,onClick:function(){r.current&&r.current.focus()},children:Object(Z.jsxs)("div",{className:l.a.input,children:[Object(Z.jsx)("input",{value:s,type:"number",ref:r,autoFocus:!0,pattern:"[0-9]*",inputMode:"decimal",placeholder:"0",style:{width:16*(s.toString().length+1)},onChange:function(e){return u((function(t){return e.target.value.length<=7?e.target.value:t}))},onFocus:function(){0==s&&u("")},onBlur:function(){""==s&&u(0)}}),Object(Z.jsx)("span",{children:"\u20bd"})]})}),Object(Z.jsxs)("div",{className:l.a.buttons,children:[Object(Z.jsxs)(ee,{className:l.a.income,onClick:function(){""!=s&&0!=s&&(d(F,parseFloat(s.toString())),n()),u("")},children:[Object(Z.jsx)("i",{className:"fas fa-plus"}),Object(Z.jsx)("span",{children:"Earned"})]}),Object(Z.jsxs)(ee,{className:l.a.spent,onClick:function(){""!=s&&0!=s&&(d(B,parseFloat(s.toString())),n()),u("")},children:[Object(Z.jsx)("i",{className:"fas fa-minus"}),Object(Z.jsx)("span",{children:"Spent"})]})]})]})},$=function(){var e=Object(a.useContext)(Y),t=(e.addTransaction,e.days,e.getTotal),n=e.fetch,r=e.isFetching;return Object(a.useEffect)((function(){n()}),[]),Object(Z.jsxs)(u.a,{className:l.a.wrapper,children:[r&&Object(Z.jsx)(z,{}),Object(Z.jsxs)("div",{className:l.a.mainGrid,children:[Object(Z.jsx)(K,{}),Object(Z.jsx)(te,{getTotal:t}),Object(Z.jsx)("div",{style:{height:"60px"}}),Object(Z.jsx)(Q,{})]})]})},ee=function(e){return Object(Z.jsx)("button",{className:l.a.button+" "+(null===e||void 0===e?void 0:e.className)||"",onClick:e.onClick,style:e.style,children:e.children})},te=function(e){var t=e.getTotal,n=Object(a.useState)(D),r=Object(o.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)({earned:0,spent:0,profit:0}),u=Object(o.a)(s,2),d=u[0],m=u[1],j=Object(a.useContext)(Y).days;return Object(a.useEffect)((function(){m({earned:t(c,F,_()().format(L)),spent:t(c,B,_()().format(L)),profit:t(c,E,_()().format(L))}),console.log("render")}),[c,j]),Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsxs)("div",{className:l.a.modeSelector,children:[Object(Z.jsx)(ee,{className:l.a.mode,style:{backgroundColor:c==C?"#00AFB9":"#efefef",color:c==C?"white":"black"},onClick:function(){return i(C)},children:"Day"}),Object(Z.jsx)(ee,{className:l.a.mode,style:{backgroundColor:c==D?"#00AFB9":"#efefef",color:c==D?"white":"black"},onClick:function(){return i(D)},children:"Week"}),Object(Z.jsx)(ee,{className:l.a.mode,style:{backgroundColor:c==S?"#00AFB9":"#efefef",color:c==S?"white":"black"},onClick:function(){return i(S)},children:"Month"}),Object(Z.jsx)(ee,{className:l.a.mode,style:{backgroundColor:c==W?"#00AFB9":"#efefef",color:c==W?"white":"black"},onClick:function(){return i(W)},children:"Year"})]}),Object(Z.jsxs)("div",{className:l.a.monthWrapper,children:[Object(Z.jsxs)("div",{className:l.a.monthItem+" "+l.a.monthIncome,children:[Object(Z.jsx)("div",{className:l.a.monthLabel,children:"Earned"}),Object(Z.jsx)("div",{className:l.a.monthAmount,children:v(d.earned)})]}),Object(Z.jsxs)("div",{className:l.a.monthItem+" "+l.a.monthSpent,children:[Object(Z.jsx)("div",{className:l.a.monthLabel,children:"Spent"}),Object(Z.jsx)("div",{className:l.a.monthAmount,children:v(d.spent)})]}),Object(Z.jsxs)("div",{className:l.a.monthItem+" "+l.a.monthProfit,children:[Object(Z.jsx)("div",{className:l.a.monthLabel,children:"Profit"}),Object(Z.jsx)("div",{className:l.a.monthAmount,children:v(d.profit)})]})]}),c===C&&Object(Z.jsx)(ne,{}),c===D&&Object(Z.jsx)(q,{})]})},ne=function(e){var t=e.day,n=void 0===t?_()().format(L):t,r=Object(a.useContext)(Y),c=r.getHistory,i=r.days,s=r.deleteTransaction,u=Object(a.useState)([]),d=Object(o.a)(u,2),m=d[0],j=d[1];return Object(a.useEffect)((function(){j(c(n))}),[n,i]),0==m.length?null:Object(Z.jsxs)("div",{className:l.a.dayView,children:[Object(Z.jsx)("div",{className:l.a.historyTitle,children:n===_()().format(L)?"Today's history:":"History of "+n.replaceAll("-",".")}),m.map((function(e,t){var a=e.type,r=e.amount,c=e.comment;return Object(Z.jsx)(ae,{comment:c,amount:r,type:a,id:t,onDelete:function(){s(n,t)}},t)}))]})},ae=function(e){var t=e.type,n=void 0===t?F:t,a=e.amount,r=void 0===a?0:a,c=e.comment,i=void 0===c?"":c,o=e.onDelete,s=void 0===o?function(){}:o;return Object(Z.jsxs)("div",{className:l.a.itemWrapper,children:[Object(Z.jsxs)("div",{className:l.a.itemValue,style:n===F?{color:"#00AFB9"}:{color:"#F07167"},children:[["+ ","- "][n],v(r)]}),Object(Z.jsx)("div",{className:l.a.itemButtons,onClick:s,children:Object(Z.jsx)("i",{className:"fas fa-times"})}),i&&Object(Z.jsx)("div",{className:l.a.itemComment,children:i})]})};n(52);var re=function(){var e=function(){var e=Object(a.useState)({}),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(o.a)(c,2),s=i[0],l=i[1],u=function(){var e=Object(h.a)(m.a.mark((function e(){var t,a,c,i,o,s,l,u,d=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=d.length>0&&void 0!==d[0]?d[0]:F,o=d.length>1&&void 0!==d[1]?d[1]:0,s=d.length>2&&void 0!==d[2]?d[2]:"",l=d.length>3&&void 0!==d[3]?d[3]:_()().format(L),u=Object(f.a)(Object(f.a)({},n),{},Object(j.a)({},l,Object(f.a)(Object(f.a)({},null===n||void 0===n?void 0:n[l]),{},{income:((null===n||void 0===n||null===(t=n[l])||void 0===t?void 0:t.income)||0)+o*Number(i===F),spent:((null===n||void 0===n||null===(a=n[l])||void 0===a?void 0:a.spent)||0)+o*Number(i===B),history:[].concat(Object(b.a)((null===n||void 0===n||null===(c=n[l])||void 0===c?void 0:c.history)||[]),[{type:i,amount:o,comment:s}])}))),r(u),e.next=8,p(!1,u);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(h.a)(m.a.mark((function e(){var t,a,c,i,o,s,l,u,d,h=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>0&&void 0!==h[0]?h[0]:_()().format(L),l=h.length>1&&void 0!==h[1]?h[1]:-1,u=(null===n||void 0===n||null===(t=n[s])||void 0===t||null===(a=t.history)||void 0===a?void 0:a[l])||{amount:0,type:F},d=Object(f.a)(Object(f.a)({},n),{},Object(j.a)({},s,Object(f.a)(Object(f.a)({},null===n||void 0===n?void 0:n[s]),{},{income:(null===n||void 0===n||null===(c=n[s])||void 0===c?void 0:c.income)-u.amount*Number(u.type===F),spent:(null===n||void 0===n||null===(i=n[s])||void 0===i?void 0:i.spent)-u.amount*Number(u.type===B),history:Object(b.a)(((null===n||void 0===n||null===(o=n[s])||void 0===o?void 0:o.history)||[]).filter((function(e,t){return t!==l})))}))),r(d),e.next=7,p(!1,d);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(h.a)(m.a.mark((function e(){var t,a,r,c,i,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]&&o[0],a=o.length>1?o[1]:void 0,l(!0),r=localStorage.getItem("userId"),c=!t&&(r||!1),e.next=7,k(c,a||n);case 7:return i=e.sent,l(!1),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{days:n,addTransaction:u,getTotal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"01-01-2021";return(e===T?Object.keys(n):P(a,e)).reduce((function(e,a){if(!(null===n||void 0===n?void 0:n[a]))return e;var r=n[a];switch(t){case F:return e+(r.income||0);case B:return e+(r.spent||0);case E:return e+((r.income||0)-(r.spent||0))}}),0)},deleteTransaction:d,getHistory:function(e){var t;return(null===(t=n[e])||void 0===t?void 0:t.history)||[]},fetch:function(){var e=Object(h.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),t=localStorage.getItem("userId"),e.next=4,g(t);case 4:if(n=e.sent){e.next=12;break}return e.next=8,p(!0);case 8:(null===(a=e.sent)||void 0===a?void 0:a.name)&&localStorage.setItem("userId",a.name),e.next=13;break;case 12:r(n);case 13:l(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isFetching:s,getDaysOfRange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_()().format(L);return P(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:D)}}}();return Object(Z.jsx)(Y.Provider,{value:e,children:Object(Z.jsx)($,{})})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,55)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};n(53);i.a.render(Object(Z.jsx)(r.a.StrictMode,{children:Object(Z.jsx)(re,{})}),document.getElementById("root")),ce()}},[[54,1,2]]]);
//# sourceMappingURL=main.2ed5b8fe.chunk.js.map